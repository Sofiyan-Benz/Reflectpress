(this.webpackJsonpreflectpress=this.webpackJsonpreflectpress||[]).push([[0],{135:function(e,t,n){e.exports=n(216)},140:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=(n(140),n(33)),s=n(41),l=(n(48),n(30)),u=n(61),m=n(102),p=n(17),f=n.n(p),d=n(24),g=n(18),h=n(222),v=n(40);var y=Object(l.b)(null,(function(e){return{addToken:function(t){e({type:"addToken",token:t})}}}))((function(e){var t=Object(a.useState)(""),n=Object(g.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),l=Object(g.a)(i,2),u=l[0],m=l[1],p=Object(a.useState)(""),y=Object(g.a)(p,2),b=y[0],E=y[1],j=Object(a.useState)(!1),k=Object(g.a)(j,2),w=k[0],O=k[1],x=Object(a.useState)([]),L=Object(g.a)(x,2),C=L[0],S=L[1],T=Object(a.useState)([]),A=Object(g.a)(T,2),N=A[0],I=A[1],F=Object(a.useState)(""),P=Object(g.a)(F,2),W=P[0],B=P[1],M=Object(a.useState)(""),z=Object(g.a)(M,2),D=z[0],J=z[1],K=function(){var t=Object(d.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/sign-up",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"usernameFromFront=".concat(c,"&emailFromFront=").concat(u,"&passwordFromFront=").concat(b)});case 2:return n=t.sent,t.next=5,n.json();case 5:1==(a=t.sent).result?(O(!0),e.addToken(a.token)):I(a.error);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=Object(d.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/sign-in",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"emailFromFront=".concat(W,"&passwordFromFront=").concat(D)});case 2:return n=t.sent,t.next=5,n.json();case 5:1==(a=t.sent).result?(O(!0),e.addToken(a.token)):S(a.error);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(console.log("userExists",w),w)return r.a.createElement(s.a,{to:"/screensource"});var U=C.map((function(e,t){return r.a.createElement("p",null,e)})),V=N.map((function(e,t){return r.a.createElement("p",null,e)}));return r.a.createElement("div",{className:"Login-page"},r.a.createElement("div",{className:"Sign"},r.a.createElement(h.a,{onChange:function(e){return B(e.target.value)},className:"Login-input",placeholder:"email"}),r.a.createElement(h.a.Password,{onChange:function(e){return J(e.target.value)},className:"Login-input",placeholder:"password"}),U,r.a.createElement(v.a,{onClick:function(){return H()},style:{width:"80px"},type:"primary"},"Sign-in")),r.a.createElement("div",{className:"Sign"},r.a.createElement(h.a,{onChange:function(e){return o(e.target.value)},className:"Login-input",placeholder:"username"}),r.a.createElement(h.a,{onChange:function(e){return m(e.target.value)},className:"Login-input",placeholder:"email"}),r.a.createElement(h.a.Password,{onChange:function(e){return E(e.target.value)},className:"Login-input",placeholder:"password"}),V,r.a.createElement(v.a,{onClick:function(){return K()},style:{width:"80px"},type:"primary"},"Sign-Up")))})),b=n(220),E=n(9),j=n(223),k=n(221);var w=function(){return r.a.createElement("nav",null,r.a.createElement(k.a,{style:{textAlign:"center"},mode:"horizontal",theme:"dark"},r.a.createElement(k.a.Item,{key:"mail"},r.a.createElement(i.b,{to:"/screensource"},r.a.createElement(E.a,{type:"home"}),"Sources")),r.a.createElement(k.a.Item,{key:"test"},r.a.createElement(i.b,{to:"/screenmyarticles"},r.a.createElement(E.a,{type:"read"}),"My Articles")),r.a.createElement(k.a.Item,{key:"app"},r.a.createElement(i.b,{to:"/"},r.a.createElement(E.a,{type:"logout"}),"Logout"))))},O=b.a.Meta;var x=Object(l.b)((function(e){return{token:e.token,selectedLang:e.selectedLang}}),(function(e){return{addToWishList:function(t){e({type:"addArticle",articleLiked:t})}}}))((function(e){var t=Object(a.useState)([]),n=Object(g.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),s=Object(g.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(""),p=Object(g.a)(m,2),h=p[0],v=p[1],y=Object(a.useState)(""),k=Object(g.a)(y,2),x=(k[0],k[1]);Object(a.useEffect)((function(){(function(){var t=Object(d.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://newsapi.org/v2/top-headlines?sources=".concat(e.match.params.id,"&apiKey=f2c10d9e90574bfa865f68a53e29dcc7"));case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log("findArticles",a),o(a.articles);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var L=function(e){console.log(e),u(!1)},C=function(e){console.log(e),u(!1)},S=function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.addToWishList(n),t.next=3,fetch("/wishlist-article",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(n.title,"&content=").concat(n.content,"&desc=").concat(n.description,"&lang=").concat(e.selectedLang,"&img=").concat(n.urlToImage,"&token=").concat(e.token)});case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{className:"Banner"}),r.a.createElement("div",{className:"Card"},c.map((function(e,t){return r.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"center"}},r.a.createElement(b.a,{style:{width:300,margin:"15px",display:"flex",flexDirection:"column",justifyContent:"space-between"},cover:r.a.createElement("img",{alt:"example",src:e.urlToImage}),actions:[r.a.createElement(E.a,{type:"read",key:"ellipsis2",onClick:function(){return function(e,t){u(!0),v(e),x(t)}(e.title,e.content)}}),r.a.createElement(E.a,{type:"like",key:"ellipsis",onClick:function(){return S(e)}})]},r.a.createElement(O,{title:e.title,description:e.description})),r.a.createElement(j.a,{title:h,visible:l,onOk:L,onCancel:C},r.a.createElement("p",null,h)))}))))})),L=b.a.Meta;var C=Object(l.b)((function(e){return{myArticles:e.wishList,token:e.token}}),(function(e){return{deleteToWishList:function(t){e({type:"deleteArticle",title:t})},saveArticles:function(t){e({type:"saveArticles",articles:t})}}}))((function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),s=Object(g.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(""),p=Object(g.a)(m,2),h=(p[0],p[1]),v=Object(a.useState)(""),y=Object(g.a)(v,2),k=y[0],O=y[1];Object(a.useEffect)((function(){(function(){var t=Object(d.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/wishlist-article?lang=".concat(k,"&token=").concat(e.token));case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log("boooody => ",a),e.saveArticles(a.articles);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[k]);var x,C=function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleteToWishList(n),t.next=3,fetch("/wishlist-article",{method:"DELETE",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"title=".concat(n,"&token=").concat(e.token)});case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(e){O(e)},T=function(e){console.log(e),o(!1)},A=function(e){console.log(e),o(!1)};return 0==e.myArticles&&(x=r.a.createElement("div",{style:{marginTop:"30px",textAlign:"center"}},r.a.createElement("h1",null," Vous n'avez pas d'articles "))),r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"Banner"},r.a.createElement("img",{style:{width:"40px",margin:"10px",cursor:"pointer"},src:"/images/fr.svg",onClick:function(){return S("fr")}}),r.a.createElement("img",{style:{width:"40px",margin:"10px",cursor:"pointer"},src:"/images/en.svg",onClick:function(){return S("en")}})),x,r.a.createElement("div",{className:"Card"},e.myArticles.map((function(e,t){return r.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"center"}},r.a.createElement(b.a,{style:{width:300,margin:"15px",display:"flex",flexDirection:"column",justifyContent:"space-between"},cover:r.a.createElement("img",{alt:"example",src:e.urlToImage}),actions:[r.a.createElement(E.a,{type:"read",key:"ellipsis2",onClick:function(){return function(e,t){o(!0),u(e),h(t)}(e.title,e.content)}}),r.a.createElement(E.a,{type:"delete",key:"ellipsis",onClick:function(){return C(e.title)}})]},r.a.createElement(L,{title:e.title,description:e.description})),r.a.createElement(j.a,{title:l,visible:c,onOk:T,onCancel:A},r.a.createElement("p",null,l)))}))))})),S=n(219),T=n(218);var A=Object(l.b)((function(e){return{selectedLang:e.selectedLang,token:e.token}}),(function(e){return{changeLang:function(t){e({type:"changeLang",selectedLang:t})}}}))((function(e){var t=Object(a.useState)([]),n=Object(g.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(e.selectedLang),l=Object(g.a)(s,2),u=l[0],m=l[1];Object(a.useEffect)((function(){(function(){var t=Object(d.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/user-lang?token=".concat(e.token));case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,m(a.lang);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){(function(){var t=Object(d.a)(f.a.mark((function t(){var n,a,r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="fr",a="fr","en"==u&&(n="en",a="us"),e.changeLang(u),t.next=6,fetch("https://newsapi.org/v2/sources?language=".concat(n,"&country=").concat(a,"&apiKey=f2c10d9e90574bfa865f68a53e29dcc7"));case 6:return r=t.sent,t.next=9,r.json();case 9:c=t.sent,console.log("body sources =====>",c),o(c.sources);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[u]);var p=function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(n),t.next=3,fetch("/user-lang",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"lang=".concat(n,"&token=").concat(e.token)});case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h={width:"40px",margin:"10px",cursor:"pointer"};"fr"==u&&(h.border="1px solid black");var v={width:"40px",margin:"10px",cursor:"pointer"};return"en"==u&&(v.border="1px solid black"),r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"Banner"},r.a.createElement("img",{style:h,src:"/images/fr.svg",onClick:function(){return p("fr")}}),r.a.createElement("img",{style:v,src:"/images/en.svg",onClick:function(){return p("en")}})),r.a.createElement("div",{className:"HomeThemes"},r.a.createElement(S.a,{itemLayout:"horizontal",dataSource:c,renderItem:function(e){return r.a.createElement(S.a.Item,null,r.a.createElement(S.a.Item.Meta,{avatar:r.a.createElement(T.a,{src:"/images/".concat(e.category,".png")}),title:r.a.createElement(i.b,{to:"/screenarticlesbysource/".concat(e.id)},e.name),description:e.description}))}})))})),N=Object(u.c)(Object(u.b)({wishList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if("saveArticles"==t.type)return t.articles;if("addArticle"==t.type){for(var n=Object(m.a)(e),a=!1,r=0;r<n.length;r++)n[r].title==t.articleLiked.title&&(a=!0);return a||n.push(t.articleLiked),n}if("deleteArticle"==t.type){n=Object(m.a)(e);for(var c=null,o=0;o<n.length;o++)n[o].title==t.title&&(c=o);return null!=c&&n.splice(c,1),n}return e},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"addToken"==t.type?t.token:e},selectedLang:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"changeLang"==t.type?t.selectedLang:e}}));var I=function(){return r.a.createElement(l.a,{store:N},r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{component:y,path:"/",exact:!0}),r.a.createElement(s.b,{component:A,path:"/screensource",exact:!0}),r.a.createElement(s.b,{component:x,path:"/screenarticlesbysource/:id",exact:!0}),r.a.createElement(s.b,{component:C,path:"/screenmyarticles",exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},48:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.e8987cc8.chunk.js.map